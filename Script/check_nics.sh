#!/bin/bash
# -----------------------------------------------------------------------------
# μ¤ν¬λ¦½νΈ μ΄λ¦„: check_nics.sh
# μ„¤λ…: ν„μ¬ μ„λ²„μ λ„¤νΈμ›ν¬ μΈν„°νμ΄μ¤ μ •λ³΄λ¥Ό ν™•μΈν•©λ‹λ‹¤.
# -----------------------------------------------------------------------------

echo "========================================"
echo " π λ„¤νΈμ›ν¬ μΈν„°νμ΄μ¤ ν™•μΈ"
echo "========================================"
echo ""

# 1. nmcli (NetworkManager) ν™•μΈ
if command -v nmcli &> /dev/null; then
    echo "[1] NetworkManager μƒνƒ (nmcli device status)"
    echo "------------------------------------------------"
    nmcli device status
    echo ""
    echo "[!] κ°μ§€λ μ΄λ”λ„· μ¥μΉ (Ansible λ°°ν¬ μ‹ μ‚¬μ©λ  μ΄λ¦„):"
    nmcli -t -f DEVICE,TYPE device | grep 'ethernet' | cut -d: -f1 | sed 's/^/- /'
else
    echo "[!] 'nmcli' λ…λ Ήμ–΄λ¥Ό μ°Ύμ„ μ μ—†μµλ‹λ‹¤. NetworkManager ν™•μΈμ„ κ±΄λ„λλ‹λ‹¤."
fi

echo ""
echo "========================================"
echo ""

# 2. ip λ…λ Ήμ–΄ ν™•μΈ
echo "[2] OS μΈν„°νμ΄μ¤ μƒνƒ (ip -br addr)"
echo "------------------------------------------------"
ip -br addr show | grep -v 'lo' | grep -v 'veth' | grep -v 'docker'

echo ""
echo "========================================"
