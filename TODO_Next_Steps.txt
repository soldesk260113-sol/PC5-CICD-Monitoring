[내일 할 일: GitOps 파이프라인 연결 작업]

현재 상태: Gitea에 리포지토리 2개 분리 완료 (myapp-source, myapp-helm).
- myapp-source: 앱 소스 + Jenkinsfile (빌드용)
- myapp-helm: Helm 차트 (배포용)
---

### 1단계: Jenkins Job 생성 (CI)
Jenkins (`http://10.2.2.40:8080`) 접속 후:
1. [New Item] 클릭 → 이름: `myapp-pipeline` (Pipeline 유형 선택)
2. [Pipeline] 섹션 설정:
   - Definition: `Pipeline script from SCM`
   - SCM: `Git`
   - Repository URL: `http://10.2.2.40:3001/admin/myapp-source.git`  <-- 주의: 소스 레포 주소
   - Credentials: `gitea-auth`
   - Branch Specifier: `*/main`
   - Script Path: `Jenkinsfile`
3. [Save] 후 [Build Now] 클릭하여 1회 성공 확인.
   (성공 시 Harbor에 이미지가 올라가고, myapp-helm 레포에 새 커밋이 생김)
---

### 2단계: ArgoCD App 생성 (CD)
ArgoCD (`https://172.16.6.61:31372`) 접속 후:
1. [New App] 클릭
2. 설정 값 입력:
   - Application Name: `myapp-prod`
   - Project: `default`
   - Sync Policy: `Automatic`, `Prune Resources`, `Self Heal` 체크 ✅
   - Source:
     - Repository URL: `http://10.2.2.40:3001/admin/myapp-helm.git`  <-- 주의: 헬름 레포 주소
     - Path: `.`  (점 하나 입력)
   - Destination:
     - Cluster URL: `https://kubernetes.default.svc`
     - Namespace: `production` (또는 dev)
3. [Create] 클릭
4. [Sync] 상태가 초록색(Synced)이 되는지 확인.

---
### 3단계: 최종 테스트
1. 로컬에서 `myapp-source` 코드 수정 (배경색 변경 등).
2. Git Push.
3. Jenkins 자동 빌드 -> Harbor 업로드 -> Helm 태그 업데이트.
4. ArgoCD 자동 감지 -> K8s 배포.
5. 브라우저로 결과 확인 (`http://10.2.2.40:3xxxxx` 또는 `http://172.16.6.61:3xxxxx`).
