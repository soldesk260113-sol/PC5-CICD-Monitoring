# ═══════════════════════════════════════════════════════════════════════════
# Antigravity Infrastructure - Ansible Inventory (New Schema)
# ═══════════════════════════════════════════════════════════════════════════

# ───────────────────────────────────────────────────────────────────────────
# ───────────────────────────────────────────────────────────────────────────
# PC1 - Security Tier (보안 계층)
# 설명: 외부 트래픽의 유입 경로이자 보안의 최전선입니다.
# - SECURE(172.16.6.61): 보안 게이트웨이, 방화벽, 포트포워딩 담당
# - WAF(10.2.1.2): 웹 방화벽 (ModSecurity), 웹 공격 차단
# ───────────────────────────────────────────────────────────────────────────
[PC1]
SECURE          ansible_host=172.16.6.61
WAF             ansible_host=10.2.1.2

# ───────────────────────────────────────────────────────────────────────────
# PC2 - K8S Control Plane Tier (Master Nodes)
# 설명 주석: 쿠버네티스 클러스터의 '두뇌' 역할을 하는 마스터 노드들.
# - 3대(HA)로 구성되어 하나가 죽어도 클러스터는 생존.
# - ControlPlane1: 초기화(Init)를 담당하는 리더 - Primary
# - ControlPlane2, 3: 리더에게 합류(Join)하는 멤버 - Secondary
# ───────────────────────────────────────────────────────────────────────────
[PC2]
K8S-ControlPlane1   ansible_host=10.2.2.2
K8S-ControlPlane2   ansible_host=10.2.2.3
K8S-ControlPlane3   ansible_host=10.2.2.4

# ───────────────────────────────────────────────────────────────────────────
# PC3 - K8S Worker Nodes Tier 1
# 설명 주석: 실제 애플리케이션(컨테이너)이 실행되는 일꾼 노드들.
# ───────────────────────────────────────────────────────────────────────────
[PC3]
K8S-WorkerNode1     ansible_host=10.2.2.5
K8S-WorkerNode2     ansible_host=10.2.2.6
K8S-WorkerNode3     ansible_host=10.2.2.7

# ───────────────────────────────────────────────────────────────────────────
# ───────────────────────────────────────────────────────────────────────────
# PC4 - DB & Storage Tier (데이터 & 스토리지 계층)
# 설명: 쿠버네티스 외부에서 동작하는 스테이트풀(Stateful) 인프라입니다.
# - DB-Proxy(HAProxy): DB 접속 요청을 부하분산 및 리더(Primary) DB로 라우팅
# - DB-Cluster(Patroni): PostgreSQL 고가용성 클러스터 (Active-Standby 자동 절체)
#   - DB-Active: 쓰기 가능 (Leader)
#   - DB-Standby: 읽기 전용 (Replica)
#   - DB-Backup: 백업 및 아카이빙 전용 (pgBackRest)
# - etcd: Patroni가 사용하는 분산 코디네이터 (Leader Election 관리)
# - Storage(NFS): 공유 파일 시스템 (백업 저장소, PV/PVC 등)
# ───────────────────────────────────────────────────────────────────────────
[PC4]
DB-Proxy1       ansible_host=10.2.2.20
DB-Proxy2       ansible_host=10.2.2.21
DB-Active       ansible_host=10.2.3.2
DB-Standby      ansible_host=10.2.3.3
DB-Backup       ansible_host=10.2.3.4
etcd_1          ansible_host=10.2.3.20
etcd_2          ansible_host=10.2.3.21
etcd_3          ansible_host=10.2.3.22
Storage         ansible_host=10.2.2.30

# ───────────────────────────────────────────────────────────────────────────
# PC5 - OPS Tier
# ───────────────────────────────────────────────────────────────────────────
[PC5]
CICD-OPS        ansible_host=10.2.2.40
Monitoring      ansible_host=10.2.2.50
Monitoring_Backup ansible_host=10.2.2.51
DNS             ansible_host=10.2.2.60

[Monitoring_Servers]
Monitoring
Monitoring_Backup

# ───────────────────────────────────────────────────────────────────────────
# PC6 - K8S Worker Nodes Tier 2
# 설명 주석: PC3의 워커 노드가 부족할 때를 대비한 추가 일꾼 노드들.
# - PC3와 동일하게 워커 노드 역할을 수행.
# ───────────────────────────────────────────────────────────────────────────
[PC6]
K8S-WorkerNode4     ansible_host=10.2.2.8
K8S-WorkerNode5     ansible_host=10.2.2.9
K8S-WorkerNode6     ansible_host=10.2.2.10

# ───────────────────────────────────────────────────────────────────────────
# Groups
# ───────────────────────────────────────────────────────────────────────────
[K8S_Control_Plane:children]
PC2

[K8S_Master:children]
K8S_Control_Plane

[K8S_Primary_Master]
K8S-ControlPlane1

[K8S_Secondary_Masters]
K8S-ControlPlane2
K8S-ControlPlane3

[K8S_Workers:children]
PC3
PC6

[K8S_Cluster:children]
K8S_Control_Plane
K8S_Workers

[DB_Servers]
DB-Active
DB-Standby
DB-Backup

[DB_Proxies]
DB-Proxy1
DB-Proxy2

[ETCD_Cluster]
etcd_1
etcd_2
etcd_3

[OPS_Servers:children]
PC5

[Security_Tier:children]
PC1

[All_Nodes:children]
PC1
PC2
PC3
PC4
PC5
PC6