options {
  listen-on port 53 { 127.0.0.1; 10.2.1.3; };
  listen-on-v6 port 53 { none; };

  directory "/var/named";
  allow-query { 10.2.0.0/16; 127.0.0.1; };

  recursion yes;
  dnssec-validation no;

  managed-keys-directory "/var/named/dynamic";
  pid-file "/run/named/named.pid";
  session-keyfile "/run/named/session.key";
};

logging {
  channel default_debug {
    file "data/named.run";
    severity dynamic;
  };
};

include "/etc/named.root.key";

{% for z in dns_zones %}
zone "{{ z.zone }}" IN {
  type master;
  file "{{ z.zone }}.zone";
  allow-update { none; };
};
{% endfor %}

